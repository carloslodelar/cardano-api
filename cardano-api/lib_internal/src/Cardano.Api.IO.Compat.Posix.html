<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span class="hs-cpp">

#if !defined(mingw32_HOST_OS)
</span><span class="hs-cpp">#define UNIX
</span><span class="hs-cpp">#endif
</span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Api.IO.Compat.Posix</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">(</span><span class="hs-cpp">
#ifdef UNIX
</span><span>    </span><span class="annot"><a href="Cardano.Api.IO.Base.html#VRFPrivateKeyFilePermissionError"><span class="hs-identifier">VRFPrivateKeyFilePermissionError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#checkVrfFilePermissionsImpl"><span class="hs-identifier">checkVrfFilePermissionsImpl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#handleFileForWritingWithOwnerPermissionImpl"><span class="hs-identifier">handleFileForWritingWithOwnerPermissionImpl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#writeSecretsImpl"><span class="hs-identifier">writeSecretsImpl</span></a></span><span class="hs-special">,</span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#ifdef UNIX
</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.Error.html"><span class="hs-identifier">Cardano.Api.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.Error.html#FileError"><span class="hs-identifier">FileError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.IO.Base.html"><span class="hs-identifier">Cardano.Api.IO.Base</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">IOException</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">bracket</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">bracketOnError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">try</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">forM_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">when</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">ExceptT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">runExceptT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.7/transformers-except-0.1.4-0ba8c64ac23d511d3cdd1508787c90f9c7aba5ab8022659e2408f2d2610992e2/share/doc/html/src"><span class="hs-identifier">Control.Monad.Trans.Except.Extra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.7/transformers-except-0.1.4-0ba8c64ac23d511d3cdd1508787c90f9c7aba5ab8022659e2408f2d2610992e2/share/doc/html/src"><span class="hs-identifier">handleIOExceptT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.7/transformers-except-0.1.4-0ba8c64ac23d511d3cdd1508787c90f9c7aba5ab8022659e2408f2d2610992e2/share/doc/html/src"><span class="hs-identifier">left</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/bytestring-0.11.4.0/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/directory-1.3.6.2/src"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/filepath-1.4.2.2/src"><span class="hs-identifier">System.FilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/filepath-1.4.2.2/src"><span class="hs-operator">(&lt;/&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">System.IO</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">System.IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Handle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">System.Posix.Files</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">fileMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">getFileStatus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">groupModes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">intersectFileModes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>                   </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">nullFileMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">otherModes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">ownerModes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">ownerReadMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">setFdOwnerAndGroup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>                   </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">setFileMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">stdFileMode</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
# if MIN_VERSION_unix(2,8,0)
</span><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">System.Posix.IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">OpenFileFlags</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">OpenMode</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">closeFd</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">defaultFileFlags</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>                   </span><span class="hs-identifier">fdToHandle</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">openFd</span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">System.Posix.IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">OpenMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">closeFd</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">defaultFileFlags</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">fdToHandle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">openFd</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">System.Posix.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Fd</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">FileMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">System.Posix.User</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier">getRealUserID</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Text.Printf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">printf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span id="local-6989586621680754777"><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#handleFileForWritingWithOwnerPermissionImpl"><span class="hs-identifier hs-type">handleFileForWritingWithOwnerPermissionImpl</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Handle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.Error.html#FileError"><span class="hs-identifier hs-type">FileError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680754777"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-50"></span><span id="handleFileForWritingWithOwnerPermissionImpl"><span class="annot"><span class="annottext">handleFileForWritingWithOwnerPermissionImpl :: forall e.
FilePath -&gt; (Handle -&gt; IO ()) -&gt; IO (Either (FileError e) ())
</span><a href="Cardano.Api.IO.Compat.Posix.html#handleFileForWritingWithOwnerPermissionImpl"><span class="hs-identifier hs-var hs-var">handleFileForWritingWithOwnerPermissionImpl</span></a></span></span><span> </span><span id="local-6989586621680754655"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754655"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621680754654"><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="#local-6989586621680754654"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-comment">-- On a unix based system, we grab a file descriptor and set ourselves as owner.</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-comment">-- Since we're holding the file descriptor at this point, we can be sure that</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-comment">-- what we're about to write to is owned by us if an error didn't occur.</span><span>
</span><span id="line-54"></span><span>  </span><span id="local-6989586621680754653"><span class="annot"><span class="annottext">UserID
</span><a href="#local-6989586621680754653"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO UserID
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">getRealUserID</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span id="local-6989586621680754652"><span class="annot"><span class="annottext">Either IOException Fd
</span><a href="#local-6989586621680754652"><span class="hs-identifier hs-var">ownedFile</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-comment">-- We only close the FD on error here, otherwise we let it leak out, since</span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-comment">-- it will be immediately turned into a Handle (which will be closed when</span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-comment">-- the Handle is closed)</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">forall a b c. IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">bracketOnError</span></a></span><span>
</span><span id="line-60"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; OpenMode -&gt; IO Fd
</span><a href="Cardano.Api.IO.Compat.Posix.html#openFileDescriptor"><span class="hs-identifier hs-var">openFileDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754655"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">OpenMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">WriteOnly</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>      </span><span class="annot"><span class="annottext">Fd -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">closeFd</span></a></span><span>
</span><span id="line-62"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680754649"><span class="annot"><span class="annottext">Fd
</span><a href="#local-6989586621680754649"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Fd -&gt; UserID -&gt; GroupID -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">setFdOwnerAndGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Fd
</span><a href="#local-6989586621680754649"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">UserID
</span><a href="#local-6989586621680754653"><span class="hs-identifier hs-var">user</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">GroupID
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Fd
</span><a href="#local-6989586621680754649"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either IOException Fd
</span><a href="#local-6989586621680754652"><span class="hs-identifier hs-var">ownedFile</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680754648"><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621680754648"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">IOException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-65"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall e. FilePath -&gt; IOException -&gt; FileError e
</span><a href="Cardano.Api.Error.html#FileIOError"><span class="hs-identifier hs-var">FileIOError</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754655"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621680754648"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680754646"><span class="annot"><span class="annottext">Fd
</span><a href="#local-6989586621680754646"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-67"></span><span>      </span><span class="annot"><span class="annottext">forall a b c. IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">bracket</span></a></span><span>
</span><span id="line-68"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Fd -&gt; IO Handle
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">fdToHandle</span></a></span><span> </span><span class="annot"><span class="annottext">Fd
</span><a href="#local-6989586621680754646"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">IO.hClose</span></a></span><span>
</span><span id="line-70"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) x a.
MonadIO m =&gt;
(IOException -&gt; x) -&gt; IO a -&gt; ExceptT x m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.7/transformers-except-0.1.4-0ba8c64ac23d511d3cdd1508787c90f9c7aba5ab8022659e2408f2d2610992e2/share/doc/html/src"><span class="hs-identifier hs-var">handleIOExceptT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall e. FilePath -&gt; IOException -&gt; FileError e
</span><a href="Cardano.Api.Error.html#FileIOError"><span class="hs-identifier hs-var">FileIOError</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754655"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><a href="#local-6989586621680754654"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span id="local-6989586621680754741"><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#writeSecretsImpl"><span class="hs-identifier hs-type">writeSecretsImpl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Char</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680754741"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/bytestring-0.11.4.0/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680754741"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-73"></span><span id="writeSecretsImpl"><span class="annot"><span class="annottext">writeSecretsImpl :: forall a.
FilePath
-&gt; FilePath -&gt; FilePath -&gt; (a -&gt; ByteString) -&gt; [a] -&gt; IO ()
</span><a href="Cardano.Api.IO.Compat.Posix.html#writeSecretsImpl"><span class="hs-identifier hs-var hs-var">writeSecretsImpl</span></a></span></span><span> </span><span id="local-6989586621680754637"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754637"><span class="hs-identifier hs-var">outDir</span></a></span></span><span> </span><span id="local-6989586621680754636"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754636"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621680754635"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754635"><span class="hs-identifier hs-var">suffix</span></a></span></span><span> </span><span id="local-6989586621680754634"><span class="annot"><span class="annottext">a -&gt; ByteString
</span><a href="#local-6989586621680754634"><span class="hs-identifier hs-var">secretOp</span></a></span></span><span> </span><span id="local-6989586621680754633"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680754633"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680754633"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">::</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680754632"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680754632"><span class="hs-identifier hs-var">secret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680754631"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680754631"><span class="hs-identifier hs-var">nr</span></a></span></span><span class="hs-special">)</span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680754613"><span class="annot"><span class="annottext">filename :: FilePath
</span><a href="#local-6989586621680754613"><span class="hs-identifier hs-var hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754637"><span class="hs-identifier hs-var">outDir</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/filepath-1.4.2.2/src"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754636"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; FilePath -&gt; r
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;%03d&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680754631"><span class="hs-identifier hs-var">nr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754635"><span class="hs-identifier hs-var">suffix</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; ByteString -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/bytestring-0.11.4.0/src"><span class="hs-identifier hs-var">BS.writeFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754613"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ByteString
</span><a href="#local-6989586621680754634"><span class="hs-identifier hs-var">secretOp</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680754632"><span class="hs-identifier hs-var">secret</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; FileMode -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">setFileMode</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754613"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">ownerReadMode</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-comment">-- | Make sure the VRF private key file is readable only</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- by the current process owner the node is running under.</span><span>
</span><span id="line-82"></span><span id="local-6989586621680754719"><span id="local-6989586621680754720"><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#checkVrfFilePermissionsImpl"><span class="hs-identifier hs-type">checkVrfFilePermissionsImpl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.IO.Base.html#File"><span class="hs-identifier hs-type">File</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680754720"><span class="hs-identifier hs-type">content</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680754719"><span class="hs-identifier hs-type">direction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.IO.Base.html#VRFPrivateKeyFilePermissionError"><span class="hs-identifier hs-type">VRFPrivateKeyFilePermissionError</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-83"></span><span id="checkVrfFilePermissionsImpl"><span class="annot"><span class="annottext">checkVrfFilePermissionsImpl :: forall content (direction :: FileDirection).
File content direction
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
</span><a href="Cardano.Api.IO.Compat.Posix.html#checkVrfFilePermissionsImpl"><span class="hs-identifier hs-var hs-var">checkVrfFilePermissionsImpl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.IO.Base.html#File"><span class="hs-identifier hs-type">File</span></a></span><span> </span><span id="local-6989586621680754594"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754594"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-84"></span><span>  </span><span id="local-6989586621680754593"><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621680754593"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileStatus
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">getFileStatus</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754594"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680754591"><span class="annot"><span class="annottext">fm :: FileMode
</span><a href="#local-6989586621680754591"><span class="hs-identifier hs-var hs-var">fm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileStatus -&gt; FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">fileMode</span></a></span><span> </span><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621680754593"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-comment">-- Check the the VRF private key file does not give read/write/exec permissions to others.</span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileMode -&gt; Bool
</span><a href="#local-6989586621680754590"><span class="hs-identifier hs-var">hasOtherPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754591"><span class="hs-identifier hs-var">fm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.7/transformers-except-0.1.4-0ba8c64ac23d511d3cdd1508787c90f9c7aba5ab8022659e2408f2d2610992e2/share/doc/html/src"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; VRFPrivateKeyFilePermissionError
</span><a href="Cardano.Api.IO.Base.html#OtherPermissionsExist"><span class="hs-identifier hs-var">OtherPermissionsExist</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754594"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-comment">-- Check the the VRF private key file does not give read/write/exec permissions to any group.</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileMode -&gt; Bool
</span><a href="#local-6989586621680754588"><span class="hs-identifier hs-var">hasGroupPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754591"><span class="hs-identifier hs-var">fm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.7/transformers-except-0.1.4-0ba8c64ac23d511d3cdd1508787c90f9c7aba5ab8022659e2408f2d2610992e2/share/doc/html/src"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; VRFPrivateKeyFilePermissionError
</span><a href="Cardano.Api.IO.Base.html#GroupPermissionsExist"><span class="hs-identifier hs-var">GroupPermissionsExist</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754594"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="#local-6989586621680754586"><span class="hs-identifier hs-type">hasPermission</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span id="local-6989586621680754586"><span class="annot"><span class="annottext">hasPermission :: FileMode -&gt; FileMode -&gt; Bool
</span><a href="#local-6989586621680754586"><span class="hs-identifier hs-var hs-var">hasPermission</span></a></span></span><span> </span><span id="local-6989586621680754585"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754585"><span class="hs-identifier hs-var">fModeA</span></a></span></span><span> </span><span id="local-6989586621680754584"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754584"><span class="hs-identifier hs-var">fModeB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754585"><span class="hs-identifier hs-var">fModeA</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-operator hs-var">`intersectFileModes`</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754584"><span class="hs-identifier hs-var">fModeB</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">nullFileMode</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="#local-6989586621680754590"><span class="hs-identifier hs-type">hasOtherPermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621680754590"><span class="annot"><span class="annottext">hasOtherPermissions :: FileMode -&gt; Bool
</span><a href="#local-6989586621680754590"><span class="hs-identifier hs-var hs-var">hasOtherPermissions</span></a></span></span><span> </span><span id="local-6989586621680754582"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754582"><span class="hs-identifier hs-var">fm'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754582"><span class="hs-identifier hs-var">fm'</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; Bool
</span><a href="#local-6989586621680754586"><span class="hs-operator hs-var">`hasPermission`</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">otherModes</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="#local-6989586621680754588"><span class="hs-identifier hs-type">hasGroupPermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span id="local-6989586621680754588"><span class="annot"><span class="annottext">hasGroupPermissions :: FileMode -&gt; Bool
</span><a href="#local-6989586621680754588"><span class="hs-identifier hs-var hs-var">hasGroupPermissions</span></a></span></span><span> </span><span id="local-6989586621680754581"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754581"><span class="hs-identifier hs-var">fm'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621680754581"><span class="hs-identifier hs-var">fm'</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; Bool
</span><a href="#local-6989586621680754586"><span class="hs-operator hs-var">`hasPermission`</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">groupModes</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | Opens a file from disk.</span><span>
</span><span id="line-103"></span><span class="annot"><a href="Cardano.Api.IO.Compat.Posix.html#openFileDescriptor"><span class="hs-identifier hs-type">openFileDescriptor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-type">OpenMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Fd</span></a></span><span class="hs-cpp">
# if MIN_VERSION_unix(2,8,0)
</span><span class="hs-identifier">openFileDescriptor</span><span> </span><span class="hs-identifier">fp</span><span> </span><span class="hs-identifier">openMode</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-identifier">openFd</span><span> </span><span class="hs-identifier">fp</span><span> </span><span class="hs-identifier">openMode</span><span> </span><span class="hs-identifier">fileFlags</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-identifier">fileFlags</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-109"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">openMode</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-110"></span><span>        </span><span class="hs-identifier">ReadOnly</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-111"></span><span>          </span><span class="hs-identifier">defaultFileFlags</span><span>
</span><span id="line-112"></span><span>        </span><span class="hs-identifier">ReadWrite</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-113"></span><span>          </span><span class="hs-identifier">defaultFileFlags</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">creat</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">stdFileMode</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-114"></span><span>        </span><span class="hs-identifier">WriteOnly</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-115"></span><span>          </span><span class="hs-identifier">defaultFileFlags</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">creat</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">ownerModes</span><span> </span><span class="hs-special">}</span><span class="hs-cpp">

# else
</span><span id="openFileDescriptor"><span class="annot"><span class="annottext">openFileDescriptor :: FilePath -&gt; OpenMode -&gt; IO Fd
</span><a href="Cardano.Api.IO.Compat.Posix.html#openFileDescriptor"><span class="hs-identifier hs-var hs-var">openFileDescriptor</span></a></span></span><span> </span><span id="local-6989586621680754580"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754580"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621680754579"><span class="annot"><span class="annottext">OpenMode
</span><a href="#local-6989586621680754579"><span class="hs-identifier hs-var">openMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">FilePath -&gt; OpenMode -&gt; Maybe FileMode -&gt; OpenFileFlags -&gt; IO Fd
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">openFd</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680754580"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">OpenMode
</span><a href="#local-6989586621680754579"><span class="hs-identifier hs-var">openMode</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FileMode
</span><a href="#local-6989586621680754578"><span class="hs-identifier hs-var">fMode</span></a></span><span> </span><span class="annot"><span class="annottext">OpenFileFlags
</span><a href="#local-6989586621680754577"><span class="hs-identifier hs-var">fileFlags</span></a></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680754578"><span class="annot"><span class="annottext">Maybe FileMode
</span><a href="#local-6989586621680754578"><span class="hs-identifier hs-var">fMode</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680754577"><span class="annot"><span class="annottext">OpenFileFlags
</span><a href="#local-6989586621680754577"><span class="hs-identifier hs-var">fileFlags</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OpenMode
</span><a href="#local-6989586621680754579"><span class="hs-identifier hs-var">openMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><span class="annottext">OpenMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">ReadOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-124"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-125"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpenFileFlags
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">defaultFileFlags</span></a></span><span>
</span><span id="line-126"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">OpenMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">ReadWrite</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-128"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">stdFileMode</span></a></span><span>
</span><span id="line-129"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpenFileFlags
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">defaultFileFlags</span></a></span><span>
</span><span id="line-130"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><span class="annottext">OpenMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">WriteOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">ownerModes</span></a></span><span>
</span><span id="line-133"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpenFileFlags
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.7/share/doc/ghc-9.2.7/html/libraries/unix-2.7.2.2/src"><span class="hs-identifier hs-var">defaultFileFlags</span></a></span><span>
</span><span id="line-134"></span><span>          </span><span class="hs-special">)</span><span class="hs-cpp">
# endif
</span><span class="hs-cpp">#endif
</span></pre></body></html>